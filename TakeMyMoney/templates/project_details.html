{% extends "base.html" %}

{% block title %}{{ project.title }} - Take My Money{% endblock %}

{% block style %}
    <style>
        #project_img {
            max-width: 800px;
            max-height: 600px;
        }

        .project-footer {
            width: 100%;
            overflow: auto;
        }
        .funded-bar-wrapper {
            overflow: hidden;
            height: 12px;
            border-radius: 6px;
        }
        .funded-bar {
            height: 100%;
            border-radius: 6px;
        }
        .bg-grey {
            background-color: #F1EEEA;
        }
        .bg-green {
            background-color: #2BDE73;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="container">
            <h1 class="text-center">{{ project.title }}</h1>
            <p class="text-center">{{ project.description }}</p>
            {% if project.photo_url %}
                <img class="center-block" src="{{ project.photo_url }}"
                 alt="project.photo_url" id="project_img">
            {% endif %}
            {% if pledges %}
            <table class="table">
                <thead>
                    <th>Pledger</th>
                    <th>Amount</th>
                </thead>
                <tbody>
                {% for pledge in pledges %}
                <tr>
                    <td><a href="/userDetails/?user_id={{ pledge.pledger_id }}">{{ pledge.pledger_name }}</a></td>
                    <td>${{ pledge.amount }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
            {% if related %}
            <table class="table">
                <thead>
                    <th>Title</th>
                    <th>Description</th>
                </thead>
                <tbody>
                {% for related_project in related %}
                <tr>
                    <td>{{ related_project.title }}</td>
                    <td>{{ related_project.description }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
            <div class="project-footer">
                <div class="pull-left">
                    <span><b>Target fund: {{ project.target_fund }}</b></span>
                    <div class="funded-bar-wrapper bg-grey">
                        <div class="funded-bar bg-green" style="width: 60%"></div>
                    </div>
                </div>
                <span class="pull-right"><b>Ends on: {{ project.end_date }}</b></span>
            </div>
            {% if user_id %}
            <div>
                <div class="pull-left">
                    <form action="/addFunding/?pid={{ project.pid }}" method="POST">
                        {% csrf_token %}
                        <input type="number" class="form-control" name="amount" id="amount">
                        <button type="submit" class="btn btn-success">Pledge</button>
                    </form>
                </div>
                <a href="/editProject/?pid={{ project.pid }}" class="btn btn-warning pull-right" role="button">Edit</a>
                <a href="/deleteProject/?pid={{ project.pid }}" class="btn btn-danger pull-right" role="button">Delete</a>
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}